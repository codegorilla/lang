
declaration:
  valueDecl
  variableDecl
  functionDecl
  classDecl

functionDecl:
  'def' identifier '(' parameters? ')' = (blockExpr | expression ';')

parameters:
  parameter (',' parameter)*

parameter:
  identifier

# Use a syntactic predicate here to avoid ';' if last token was '}'

statement:
  expression? ';'

expression:
  assignmentExpr
  printExpr
  returnExpr
  whileExpr

whileStmt:
  'while' '(' expression ')' (blockExpr => <expr blockExpr> | expression ';')

whileExpr:
  'while' '(' expression ')' (blockExpr => <expr blockExpr> | expression)


assignmentExpr:
  blockExpr
  ifExpr


blockExpr:
  '{' blockElement* '}'

arrayLiteral:
  '[' arrayElements? ']'

arrayElements:
  expression (',' expression)*

hashLiteral:
  '{' hashElements? '}'

x = [:]

x = {:}

x = [ "one": 1, "two": 2 ]

x = Map({
  one: 1,
  two: 2
});

x = Map(
  "one" -> 1,
  "two" -> 2
);

x = Map();

